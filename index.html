<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HERAM EMPIRE | Ultimate Studio 2026</title>
    <style>
        :root { 
            --bg: #050505; --accent: #10a37f; --gold: #ffd700; 
            --psy: #4a90e2; --circuit: #00ff41; --white: #ececec; 
        }
        body { background: var(--bg); color: var(--white); font-family: Tahoma, sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± Ùˆ Ù¾Ù†Ù„ Ø¢Ù…Ø§Ø± */
        .sidebar { width: 270px; background: #000; border-left: 1px solid #222; padding: 20px; display: flex; flex-direction: column; box-shadow: 2px 0 10px rgba(0,0,0,0.5); }
        .stats-card { background: rgba(255, 215, 0, 0.05); padding: 15px; border-radius: 12px; border: 1px solid #222; margin: 10px 0; font-size: 0.85em; }
        .pulse { width: 8px; height: 8px; background: #f00; border-radius: 50%; display: inline-block; animation: blink 1s infinite; }

        /* Ø¨Ø®Ø´ Ø§ØµÙ„ÛŒ Ùˆ Ú†Øª */
        .main { flex: 1; display: flex; flex-direction: column; background: radial-gradient(circle at top, #1a1a1a 0%, #050505 100%); }
        #chat-window { flex: 1; overflow-y: auto; padding: 25px; scroll-behavior: smooth; }
        
        /* Ø¨Ø§Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ Ø§Ø³ØªÙˆØ¯ÛŒÙˆÙ‡Ø§ */
        .studio-box { margin-top: 15px; border: 2px solid var(--gold); border-radius: 15px; overflow: hidden; background: #000; transition: 0.3s; }
        .psy-mode { border-color: var(--psy); background: rgba(74, 144, 226, 0.05); padding: 15px; }
        .circuit-mode { border-color: var(--circuit); background: #001100; padding: 10px; }
        
        video, img, iframe { width: 100%; display: block; border: none; }

        /* Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ */
        .msg-row { padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.03); animation: slideIn 0.4s ease; }
        .ai { background: rgba(255,255,255,0.02); border-right: 4px solid var(--accent); }
        
        /* ÙˆØ±ÙˆØ¯ÛŒ ÙÙˆÙ‚ Ù¾ÛŒØ´Ø±ÙØªÙ‡ */
        .input-area { padding: 30px; display: flex; justify-content: center; align-items: center; gap: 15px; }
        .input-box { flex: 1; max-width: 900px; background: #1a1a1a; border-radius: 20px; display: flex; padding: 15px; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input { flex: 1; background: transparent; border: none; color: white; outline: none; font-size: 16px; font-family: Tahoma; }
        .mic-btn { width: 55px; height: 55px; border-radius: 50%; border: 2px solid #444; background: #111; color: #fff; cursor: pointer; font-size: 20px; transition: 0.3s; }
        .mic-btn.active { border-color: var(--gold); box-shadow: 0 0 20px var(--gold); color: var(--gold); transform: scale(1.1); }

        pre { background: #000; color: #0f0; padding: 15px; border-radius: 10px; direction: ltr; text-align: left; overflow: auto; border: 1px solid #222; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.2; } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div id="auth-gate" style="position:fixed; inset:0; background:#000; z-index:10000; display:flex; align-items:center; justify-content:center;">
    <div style="background:#111; padding:50px; border-radius:30px; border:1px solid var(--gold); text-align:center; width:350px; box-shadow: 0 0 100px rgba(255,215,0,0.1);">
        <h1 style="color:var(--gold); margin-bottom:30px;">EMPIRE OF HERAM</h1>
        <input type="text" id="u-name" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ±ÛŒ" style="width:100%; padding:15px; margin-bottom:20px; background:#222; border:1px solid #444; color:#fff; border-radius:12px; text-align:center;">
        <button onclick="initEmpire()" style="width:100%; padding:18px; background:var(--gold); border:none; border-radius:12px; cursor:pointer; font-weight:bold; font-size:18px; color:#000;">ØªØ§ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª Ùˆ ÙˆØ±ÙˆØ¯</button>
    </div>
</div>

<div class="sidebar">
    <h2 style="color:var(--accent); letter-spacing:3px;">HERAM AI</h2>
    <div class="stats-card">
        <div style="margin-bottom:8px;">ÙˆØ¶Ø¹ÛŒØª: <span style="color:var(--accent)">ONLINE</span></div>
        <div style="margin-bottom:8px;">Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„: <span id="online-val">Û±,Û´Û°Ûµ</span></div>
        <div>Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¹ØµØ¨ÛŒ: <span><span class="pulse"></span> LIVE</span></div>
    </div>
    <div style="font-size: 0.8em; color: #555; margin-top: 20px;">
        â€¢ Ø§Ø³ØªÙˆØ¯ÛŒÙˆ ÙˆÛŒØ¯ÛŒÙˆ: ÙØ¹Ø§Ù„<br>
        â€¢ Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø¹Ú©Ø³: ÙØ¹Ø§Ù„<br>
        â€¢ Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ù…Ø¯Ø§Ø±: ÙØ¹Ø§Ù„<br>
        â€¢ Ú©Ù„ÛŒÙ†ÛŒÚ© Ø±ÙˆØ§Ù†â€ŒØ´Ù†Ø§Ø³ÛŒ: ÙØ¹Ø§Ù„
    </div>
    <div style="margin-top:auto; padding:15px; border-top:1px solid #222; color:var(--gold);" id="user-display">ğŸ‘¤ Guest</div>
</div>

<div class="main">
    <div id="chat-window"></div>
    <div class="input-area">
        <button class="mic-btn" id="mic-trigger" onclick="toggleSpeech()">ğŸ¤</button>
        <div class="input-box">
            <input type="text" id="user-input" placeholder="ÙØ±Ù…Ø§Ù† ØµÙˆØªÛŒ Ø¨Ø¯Ù‡ÛŒØ¯ ÛŒØ§ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯..." onkeypress="if(event.key==='Enter') processInput()">
            <button onclick="processInput()" style="background:var(--accent); color:white; border:none; border-radius:15px; padding:0 25px; cursor:pointer; font-weight:bold;">Ø§Ø¬Ø±Ø§</button>
        </div>
    </div>
</div>

<script>
    let isListening = false;
    const SpeechRec = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRec();
    recognition.lang = 'fa-IR';
    recognition.continuous = true;

    function initEmpire() {
        const name = document.getElementById('u-name').value;
        if(!name) return alert("Ù†Ø§Ù… Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ± Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.");
        localStorage.setItem('heram_master', name);
        document.getElementById('auth-gate').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('auth-gate').style.display = 'none';
            document.getElementById('user-display').innerText = `ğŸ‘‘ ${name}`;
            speak(`Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ Ø§Ø±Ø¨Ø§Ø¨ ${name}. ØªÙ…Ø§Ù… Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù‡Ø±Ù… Ø¯Ø± Ø®Ø¯Ù…Øª Ø´Ù…Ø§ Ù‡Ø³ØªÙ†Ø¯.`);
            addMsg(`Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ± ${name}ØŒ Ù‡Ø³ØªÙ‡ Ù…Ø±Ú©Ø²ÛŒ Ù‡Ø±Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯. Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø¬Ø±Ø§ÛŒ ÙØ±Ø§Ù…ÛŒÙ† Ø¯Ø± ØªÙ…Ø§Ù… Ø§Ø³ØªÙˆØ¯ÛŒÙˆÙ‡Ø§ Ù‡Ø³ØªÙ….`, 'ai');
        }, 500);
        
        setInterval(() => {
            const count = Math.floor(1400 + Math.random() * 80);
            document.getElementById('online-val').innerText = count.toLocaleString('fa-IR');
        }, 3000);
    }

    function toggleSpeech() {
        const btn = document.getElementById('mic-trigger');
        if(!isListening) {
            isListening = true; btn.classList.add('active'); recognition.start();
        } else {
            isListening = false; btn.classList.remove('active'); recognition.stop();
        }
    }

    recognition.onresult = (e) => {
        const transcript = e.results[e.results.length - 1][0].transcript;
        document.getElementById('user-input').value = transcript;
        processInput();
    };

    async function processInput() {
        const inputField = document.getElementById('user-input');
        const query = inputField.value.trim();
        if(!query) return;
        inputField.value = "";

        addMsg(query, 'user');
        const aiResponse = addMsg("Ø¯Ø± Ø­Ø§Ù„ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…ÙˆØªÙˆØ± Ø§Ø³ØªÙˆØ¯ÛŒÙˆ...", 'ai');

        // Û±. Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø±ÙˆØ§Ù†â€ŒØ´Ù†Ø§Ø³ÛŒ
        if(query.includes("Ø­Ø§Ù„Ù…") || query.includes("Ù…Ø´Ø§ÙˆØ±Ù‡") || query.includes("Ø§Ø­Ø³Ø§Ø³")) {
            aiResponse.innerHTML = `<div class="psy-mode">ğŸ§  <b>Ú©Ù„ÛŒÙ†ÛŒÚ© Ù‡Ø±Ù…:</b> ØªØ­Ù„ÛŒÙ„ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø°Ù‡Ù†ÛŒ...<br><p>Ø§Ø±Ø¨Ø§Ø¨ØŒ Ù…Ù† Ù†ÙˆØ³Ø§Ù†Ø§Øª Ø§Ù†Ø±Ú˜ÛŒ Ú©Ù„Ø§Ù…ÛŒ Ø´Ù…Ø§ Ø±Ø§ ØªØ­Ù„ÛŒÙ„ Ú©Ø±Ø¯Ù…. Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø±ÙˆÛŒ Ø§Ù‡Ø¯Ø§Ù Ø¨Ø²Ø±Ú¯ØªØ§Ù† ØªÙ…Ø±Ú©Ø² Ú©Ù†ÛŒØ¯.</p><div style="height:5px; background:var(--psy); width:70%; border-radius:5px;"></div></div>`;
            speak("Ù…Ù† Ø¯Ø± Ú©Ù†Ø§Ø± Ø´Ù…Ø§ Ù‡Ø³ØªÙ…. ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ù† Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ù‚Ø¯Ø±Øª Ø¯Ø±ÙˆÙ†ÛŒ Ø´Ù…Ø§Ø³Øª.");
        } 
        // Û². Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ù…Ø¯Ø§Ø± Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ
        else if(query.includes("Ù…Ø¯Ø§Ø±") || query.includes("Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©")) {
            aiResponse.innerHTML = `<div class="studio-box circuit-mode">âš¡ <b>Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ù‡Ø±Ù…:</b> Ø·Ø±Ø§Ø­ÛŒ Ù…Ø¯Ø§Ø± ÙÛŒØ²ÛŒÚ©ÛŒ...<br><iframe srcdoc="<html><body style='background:#000;color:#0f0;font-family:monospace;padding:10px;'>[LAB] Simulation Active<br>---<br>(+)--[Switch]--[LED]--(-)<br>Ø¬Ø±ÛŒØ§Ù† Ø¨Ø±Ù‚Ø±Ø§Ø± Ø§Ø³Øª.</body></html>" style="height:150px;"></iframe></div>`;
            speak("Ù†Ù‚Ø´Ù‡ ÙÙ†ÛŒ Ù…Ø¯Ø§Ø± Ø¯Ø± Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ù…Ø¬Ø§Ø²ÛŒ Ù‡Ø±Ù… Ø±Ù†Ø¯Ø± Ø´Ø¯.");
        }
        // Û³. Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø¹Ú©Ø³ Ùˆ ÙˆÛŒØ¯ÛŒÙˆ
        else if(query.includes("Ø¹Ú©Ø³") || query.includes("ÙˆÛŒØ¯ÛŒÙˆ") || query.includes("Ø¨Ú©Ø´") || query.includes("ØªØµÙˆÛŒØ±")) {
            const isVideo = query.includes("ÙˆÛŒØ¯ÛŒÙˆ");
            aiResponse.innerHTML = `ğŸ¬ Ø¯Ø± Ø­Ø§Ù„ Ø±Ù†Ø¯Ø±ÛŒÙ†Ú¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ...`;
            setTimeout(() => {
                const media = isVideo ? `<video controls autoplay loop><source src="https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"></video>` : `<img src="https://pollinations.ai/p/${encodeURIComponent(query)}?width=1024&height=1024&model=flux">`;
                aiResponse.innerHTML = `<div class="studio-box">${media}<div style="padding:10px; display:flex; gap:10px;"><button style="flex:1; background:#333; color:#fff; border:none; padding:8px; border-radius:5px; cursor:pointer;" onclick="alert('Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ...')">Ø§Ù†ØªØ´Ø§Ø± Ø¬Ù‡Ø§Ù†ÛŒ</button></div></div>`;
                speak("Ø®Ø±ÙˆØ¬ÛŒ Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ø±Ø³Ø§Ù†Ù‡ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯.");
            }, 3000);
        }
        // Û´. Ú†Øª Ùˆ Ú©Ø¯Ù†ÙˆÛŒØ³ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
        else {
            try {
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(query)}?system=You are Heram AI, the ultimate empire assistant. You are an expert in coding, psychology, and engineering. Answer in Persian.`);
                const data = await res.text();
                aiResponse.innerHTML = data.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
                speak(data.replace(/```[\s\S]*?```/g, "Ú©Ø¯ Ø¯Ø± Ù¾Ù†Ø¬Ø±Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯."));
            } catch(e) { aiResponse.innerHTML = "Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ù‡Ø³ØªÙ‡ Ù…Ø±Ú©Ø²ÛŒ."; }
        }
    }

    function addMsg(t, s) {
        const win = document.getElementById('chat-window');
        const row = document.createElement('div');
        row.className = `msg-row ${s==='ai'?'ai':''}`;
        row.innerHTML = `<div style="width:90%; margin:auto; display:flex; gap:15px;"><b>${s==='user'?'MASTER':'HERAM'}:</b> <div class="txt">${t}</div></div>`;
        win.appendChild(row);
        win.scrollTop = win.scrollHeight;
        return row.querySelector('.txt');
    }

    function speak(t) {
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(t);
        u.lang = 'fa-IR'; u.rate = 1.0; u.pitch = 0.9;
        window.speechSynthesis.speak(u);
    }
</script>
</body>
</html>
