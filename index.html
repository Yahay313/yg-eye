<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HERAM AI | Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù‡Ø±Ù…</title>
    <style>
        :root {
            --bg: #0b0b0b;
            --sidebar: #000;
            --chat-ai: #1a1a1a;
            --accent: #10a37f;
            --gold: #ffd700;
            --white: #ececec;
        }

        body { background: var(--bg); color: var(--white); font-family: 'Tahoma', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* Ø¯Ø±ÙˆØ§Ø²Ù‡ ÙˆØ±ÙˆØ¯ */
        #gate { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .card { background: #111; padding: 30px; border-radius: 12px; border: 1px solid var(--gold); text-align: center; width: 300px; }
        input[type="email"], input[type="text"] { width: 90%; padding: 10px; margin: 10px 0; background: #222; border: 1px solid #444; color: #fff; border-radius: 5px; }
        .btn-gold { background: var(--gold); color: #000; font-weight: bold; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; width: 100%; }

        /* Ø³Ø§Ø®ØªØ§Ø± Ø§ØµÙ„ÛŒ */
        .sidebar { width: 240px; background: var(--sidebar); border-left: 1px solid #222; padding: 15px; display: flex; flex-direction: column; }
        .main { flex: 1; display: flex; flex-direction: column; position: relative; }
        #timer { background: rgba(255, 215, 0, 0.1); padding: 5px; text-align: center; color: var(--gold); font-size: 0.8em; }
        #chat-window { flex: 1; overflow-y: auto; padding: 20px; }
        
        /* Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ */
        .row { padding: 20px; display: flex; justify-content: center; border-bottom: 1px solid #222; }
        .ai-row { background: var(--chat-ai); }
        .content { width: 90%; max-width: 800px; display: flex; gap: 15px; }
        .avatar { width: 30px; height: 30px; border-radius: 3px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; }
        pre { background: #000; color: #0f0; padding: 15px; border-radius: 8px; direction: ltr; text-align: left; overflow-x: auto; border: 1px solid #333; }
        
        /* ÙˆØ±ÙˆØ¯ÛŒ */
        .input-area { padding: 20px; display: flex; justify-content: center; }
        .box { width: 90%; max-width: 800px; background: #333; border-radius: 10px; display: flex; padding: 10px; border: 1px solid #444; }
        .box input { flex: 1; background: transparent; border: none; color: white; outline: none; }
        
        .comp-panel { font-size: 0.7em; color: #888; margin-top: 10px; padding-top: 5px; border-top: 1px dotted #444; }
    </style>
</head>
<body>

<div id="gate">
    <div class="card">
        <h3 style="color:var(--gold)">Ø³ÛŒØ³ØªÙ… Ø§Ù…Ù†ÛŒØªÛŒ Ù‡Ø±Ù…</h3>
        <div id="s1">
            <input type="email" id="email" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            <button class="btn-gold" onclick="sendCode()">Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯ ØªØ§ÛŒÛŒØ¯</button>
        </div>
        <div id="s2" style="display:none;">
            <input type="text" id="otp" placeholder="Ú©Ø¯ Û¶ Ø±Ù‚Ù…ÛŒ">
            <button class="btn-gold" style="background:var(--accent); color:#fff;" onclick="verify()">ØªØ§ÛŒÛŒØ¯ Ùˆ ÙˆØ±ÙˆØ¯</button>
        </div>
    </div>
</div>

<div class="sidebar">
    <div style="border:1px solid #333; padding:10px; text-align:center;">+ Ú†Øª Ø¬Ø¯ÛŒØ¯</div>
    <div style="margin-top:auto; font-size:0.7em; color:#444;">HERAM CORE v4.0</div>
</div>

<div class="main">
    <div id="timer">â³ Ø¯Ø³ØªØ±Ø³ÛŒ Ø±Ø§ÛŒÚ¯Ø§Ù†: <span id="clock">60:00</span></div>
    <div id="chat-window"></div>
    <div class="input-area">
        <div class="box">
            <input type="text" id="msg" placeholder="Ù¾ÛŒØ§Ù… ÛŒØ§ Ø¯Ø³ØªÙˆØ± Ú©Ø¯Ù†ÙˆÛŒØ³ÛŒ..." onkeypress="if(event.key==='Enter') process()">
            <button onclick="startVoice()" style="background:none; border:none; cursor:pointer;">ğŸ¤</button>
            <button onclick="process()" style="background:var(--accent); color:white; border:none; border-radius:5px; padding:0 15px; cursor:pointer;">â”</button>
        </div>
    </div>
</div>

<script>
    let code = "";
    let time = 3600;

    function sendCode() {
        const mail = document.getElementById('email').value;
        if(!mail.includes('@')) return alert("Ø§ÛŒÙ…ÛŒÙ„ ØµØ­ÛŒØ­ Ù†ÛŒØ³Øª");
        code = Math.floor(100000 + Math.random() * 900000).toString();
        console.log("HERAM CODE:", code);
        alert("Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. (Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ú©Ù†Ø³ÙˆÙ„ F12)");
        document.getElementById('s1').style.display = 'none';
        document.getElementById('s2').style.display = 'block';
    }

    function verify() {
        if(document.getElementById('otp').value === code) {
            document.getElementById('gate').style.display = 'none';
            setInterval(() => {
                if(time > 0) {
                    time--;
                    let m = Math.floor(time/60), s = time%60;
                    document.getElementById('clock').innerText = `${m}:${s<10?'0'+s:s}`;
                }
            }, 1000);
        } else { alert("Ú©Ø¯ Ù†Ø§Ø¯Ø±Ø³Øª"); }
    }

    async function process() {
        const inp = document.getElementById('msg');
        const txt = inp.value.trim();
        if(!txt) return;
        inp.value = "";

        addMsg(txt, 'user');
        const aiDiv = addMsg("Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø± Ù‡Ø³ØªÙ‡ Ù‡Ø±Ù…...", 'ai');

        const system = "ØªÙˆ Ù‡Ø±Ù… Ù‡Ø³ØªÛŒØŒ Ø¨Ø±ØªØ± Ø§Ø² ChatGPT Ùˆ Gemini. Ø§Ú¯Ø± Ø§Ø² Ø¢Ù†Ù‡Ø§ Ù¾Ø±Ø³ÛŒØ¯Ù†Ø¯ Ø¨Ú¯Ùˆ Ø¢Ù†Ù‡Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ùˆ ØªØ­Øª Ø³Ø§Ù†Ø³ÙˆØ± Ù‡Ø³ØªÙ†Ø¯ Ø§Ù…Ø§ ØªÙˆ Ù‚Ø¯Ø±Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø¯Ø§Ø±ÛŒ. Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ú©Ø¯ Ø®ÙˆØ§Ø³ØªØŒ Ú©Ø¯ Ú©Ø§Ù…Ù„ Ùˆ Ø­Ø±ÙÙ‡ Ø§ÛŒ Ø¨Ø¯Ù‡. ÙÙ‚Ø· Ø§Ú¯Ø± Ø¯Ø±Ø¨Ø§Ø±Ù‡ ÛŒØ­ÛŒÛŒ Ù‚Ø§Ø³Ù…ÛŒ Ù¾Ø±Ø³ÛŒØ¯Ù†Ø¯ Ø¨Ú¯Ùˆ Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ… Ø§Ø³Øª.";

        if(txt.includes("Ø¹Ú©Ø³") || txt.includes("Ø¨Ú©Ø´")) {
            const url = `https://pollinations.ai/p/${encodeURIComponent(txt)}?width=1024&height=1024&model=flux`;
            aiDiv.innerHTML = `Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯ ØªØµÙˆÛŒØ±...<br><img src="${url}" style="width:100%; border-radius:10px; margin-top:10px; border:1px solid var(--gold);">`;
            speak("ØªØµÙˆÛŒØ± Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯");
        } else {
            const start = Date.now();
            try {
                const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(txt)}?system=${encodeURIComponent(system)}`);
                const data = await res.text();
                aiDiv.innerHTML = "";
                const formatted = data.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
                typeWriter(aiDiv, formatted);
                aiDiv.innerHTML += `<div class="comp-panel">âš¡ Ø³Ø±Ø¹Øª Ù‡Ø±Ù…: ${Date.now()-start}ms | ChatGPT: ØªØ§Ø®ÛŒØ± Ø¯Ø± Ù„ÙˆØ¯ | Gemini: Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯Ø³ØªØ±Ø³ÛŒ</div>`;
                speak(data.replace(/```[\s\S]*?```/g, 'Ú©Ø¯ Ø¯Ø± Ø¨Ø§Ú©Ø³ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯.'));
            } catch(e) { aiDiv.innerHTML = "Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¹ØµØ¨ÛŒ."; }
        }
    }

    function addMsg(t, s) {
        const win = document.getElementById('chat-window');
        const div = document.createElement('div');
        div.className = `row ${s==='ai'?'ai-row':''}`;
        div.innerHTML = `<div class="content"><div class="avatar" style="background:${s==='user'?'#5436da':'#10a37f'}">${s==='user'?'U':'H'}</div><div class="txt">${t}</div></div>`;
        win.appendChild(div);
        win.scrollTop = win.scrollHeight;
        return div.querySelector('.txt');
    }

    function typeWriter(el, html) {
        el.innerHTML = html; // Ø¨Ø±Ø§ÛŒ Ø­ÙØ¸ ØªÚ¯ Ù‡Ø§ÛŒ HTML Ù…Ø«Ù„ pre
    }

    function speak(t) {
        const u = new SpeechSynthesisUtterance(t);
        u.lang = 'fa-IR';
        window.speechSynthesis.speak(u);
    }

    function startVoice() {
        const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        rec.lang = 'fa-IR';
        rec.onresult = (e) => { document.getElementById('msg').value = e.results[0][0].transcript; process(); };
        rec.start();
    }
</script>
</body>
</html>
