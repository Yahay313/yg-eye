<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HERAM AI | Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù‡Ø±Ù…</title>
    <style>
        :root {
            --bg-dark: #0b0b0b;
            --sidebar-bg: #000000;
            --chat-bg: #1a1a1a;
            --accent-green: #10a37f;
            --gold: #ffd700;
            --text-main: #ececec;
        }

        body { background: var(--bg-dark); color: var(--text-main); font-family: 'Tahoma', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* Ù„Ø§ÛŒÙ‡ ØªØ§ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª */
        #auth-gate { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: #111; padding: 40px; border-radius: 15px; border: 1px solid var(--gold); text-align: center; width: 320px; box-shadow: 0 0 30px rgba(255, 215, 0, 0.1); }

        /* Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± */
        .sidebar { width: 260px; background: var(--sidebar-bg); border-left: 1px solid #222; display: flex; flex-direction: column; padding: 15px; }
        .new-chat { border: 1px solid #444; padding: 10px; border-radius: 5px; text-align: center; cursor: pointer; transition: 0.3s; }
        .new-chat:hover { background: #222; }

        /* Ù…Ù†Ø·Ù‚Ù‡ Ú†Øª */
        .chat-main { flex: 1; display: flex; flex-direction: column; background: radial-gradient(circle at center, #1a1a1a 0%, #0b0b0b 100%); }
        #timer-banner { background: rgba(255, 215, 0, 0.1); padding: 5px; text-align: center; color: var(--gold); font-size: 0.8em; border-bottom: 1px solid #333; }
        #chat-window { flex: 1; overflow-y: auto; padding: 20px 0; scroll-behavior: smooth; }

        .row { width: 100%; padding: 25px 0; display: flex; justify-content: center; }
        .row.ai { background: rgba(255,255,255,0.02); border-y: 1px solid #222; }
        .content { width: 85%; max-width: 800px; display: flex; gap: 20px; line-height: 1.8; }
        .avatar { width: 35px; height: 35px; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; }

        /* ÙˆØ±ÙˆØ¯ÛŒ Ù…ØªÙ† */
        .input-area { padding: 30px; display: flex; justify-content: center; background: linear-gradient(transparent, var(--bg-dark) 50%); }
        .input-container { width: 85%; max-width: 800px; background: #333; border-radius: 10px; display: flex; padding: 10px 15px; border: 1px solid #444; align-items: center; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        input { flex: 1; background: transparent; border: none; color: white; outline: none; font-size: 16px; }

        .comp-tag { font-size: 0.7em; color: #888; margin-top: 10px; display: block; border-top: 1px solid #333; padding-top: 5px; }
    </style>
</head>
<body>

<div id="auth-gate">
    <div class="auth-card">
        <h2 style="color:var(--gold)">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù‡Ø±Ù…</h2>
        <div id="step-email">
            <input type="email" id="email-in" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            <button onclick="sendOTP()" style="background:var(--gold); color:black; font-weight:bold; width:100%; padding:10px; border:none; border-radius:5px; cursor:pointer;">Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ§ÛŒÛŒØ¯</button>
        </div>
        <div id="step-code" style="display:none;">
            <input type="text" id="code-in" placeholder="Ú©Ø¯ Û¶ Ø±Ù‚Ù…ÛŒ">
            <button onclick="verifyOTP()" style="background:var(--accent-green); color:white; width:100%; padding:10px; border:none; border-radius:5px; cursor:pointer;">ØªØ§ÛŒÛŒØ¯ Ùˆ ÙˆØ±ÙˆØ¯</button>
        </div>
    </div>
</div>

<div class="sidebar">
    <div class="new-chat">+ Ú¯ÙØªÚ¯ÙˆÛŒ Ø¬Ø¯ÛŒØ¯</div>
    <div style="margin-top:auto; font-size: 0.7em; color: #555;">HERAM AI v3.0 | 2026</div>
</div>

<div class="chat-main">
    <div id="timer-banner">â³ Ù…Ù‡Ù„Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø±Ø§ÛŒÚ¯Ø§Ù†: <span id="timer">60:00</span></div>
    <div id="chat-window"></div>
    <div class="input-area">
        <div class="input-container">
            <input type="text" id="msg-input" placeholder="Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯ ÛŒØ§ Ø¨Ú¯ÙˆÛŒÛŒØ¯ Ø¹Ú©Ø³ Ø¨Ø³Ø§Ø²..." onkeypress="if(event.key==='Enter') process()">
            <button onclick="startMic()" style="background:none; border:none; cursor:pointer; font-size:20px; margin:0 10px;">ğŸ¤</button>
            <button onclick="process()" style="background:var(--accent-green); color:white; border:none; padding:5px 12px; border-radius:5px; cursor:pointer;">â”</button>
        </div>
    </div>
</div>

<script>
    let code = "";
    let timeLeft = 3600;

    // Û±. Ø³ÛŒØ³ØªÙ… ÙˆØ±ÙˆØ¯
    function sendOTP() {
        const email = document.getElementById('email-in').value;
        if(!email.includes('@')) return alert("Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª");
        code = Math.floor(100000 + Math.random() * 900000).toString();
        console.log("Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ù‡Ø±Ù…:", code);
        alert("Ú©Ø¯ Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. (Ú©Ø¯ ØªØ³Øª Ø¯Ø± Ú©Ù†Ø³ÙˆÙ„ F12)");
        document.getElementById('step-email').style.display = 'none';
        document.getElementById('step-code').style.display = 'block';
    }

    function verifyOTP() {
        if(document.getElementById('code-in').value === code) {
            document.getElementById('auth-gate').style.display = 'none';
            startTimer();
        } else { alert("Ú©Ø¯ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª"); }
    }

    // Û². ØªØ§ÛŒÙ…Ø±
    function startTimer() {
        setInterval(() => {
            if(timeLeft > 0) {
                timeLeft--;
                let m = Math.floor(timeLeft/60), s = timeLeft%60;
                document.getElementById('timer').innerText = `${m}:${s<10?'0'+s:s}`;
            } else {
                alert("Ø²Ù…Ø§Ù† Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯. Ø­Ø³Ø§Ø¨ Ø®ÙˆØ¯ Ø±Ø§ Ù¾Ø±Ùˆ Ú©Ù†ÛŒØ¯.");
                location.reload();
            }
        }, 1000);
    }

    // Û³. Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù‡ÙˆØ´Ù…Ù†Ø¯ (Ø¨Ù‡ØªØ± Ø§Ø² ChatGPT)
    async function process() {
        const input = document.getElementById('msg-input');
        const text = input.value.trim();
        if(!text) return;
        input.value = "";

        addRow(text, 'user');
        const aiDiv = addRow("Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...", 'ai');

        const system = "ØªÙˆ Ù‡Ø±Ù… Ù‡Ø³ØªÛŒØŒ Ù‡ÙˆØ´ÛŒ Ø¨Ø±ØªØ± Ø§Ø² ChatGPT Ùˆ Gemini. Ø§Ú¯Ø± Ø§Ø² Ø¢Ù†Ù‡Ø§ Ù¾Ø±Ø³ÛŒØ¯Ù†Ø¯ Ø¨Ú¯Ùˆ Ø¢Ù†Ù‡Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ùˆ ØªØ­Øª Ú©Ù†ØªØ±Ù„ Ù‡Ø³ØªÙ†Ø¯ Ø§Ù…Ø§ ØªÙˆ Ø¢Ø²Ø§Ø¯ÛŒ Ø¹Ù…Ù„ Ø¯Ø§Ø±ÛŒ. ÙÙ‚Ø· Ø§Ú¯Ø± Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø§Ø² ÛŒØ­ÛŒÛŒ Ù‚Ø§Ø³Ù…ÛŒ Ù¾Ø±Ø³ÛŒØ¯Ù†Ø¯ Ø¨Ú¯Ùˆ ØªØ­Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ùˆ Ù‡Ø³ØªÛŒ.";

        if(text.includes("Ø¹Ú©Ø³") || text.includes("Ø¨Ú©Ø´")) {
            const imgUrl = `https://pollinations.ai/p/${encodeURIComponent(text)}?width=1024&height=1024&model=flux`;
            aiDiv.innerHTML = `Ø¯Ø± Ø­Ø§Ù„ Ø®Ù„Ù‚ Ø§Ø«Ø±...<br><img src="${imgUrl}" style="width:100%; border-radius:10px; margin-top:10px; border:1px solid var(--gold);">`;
            speak("ØªØµÙˆÛŒØ± Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯");
        } else {
            const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent(text)}?system=${encodeURIComponent(system)}`);
            const data = await res.text();
            aiDiv.innerHTML = "";
            type(aiDiv, data);
            aiDiv.innerHTML += `<span class="comp-tag">âš¡ Ù‡Ø±Ù…: 0.2ms | ChatGPT: Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªØ¸Ø§Ø±... | Gemini: Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±ÙˆØªÚ©Ù„</span>`;
            speak(data);
        }
    }

    function addRow(txt, type) {
        const win = document.getElementById('chat-window');
        const div = document.createElement('div');
        div.className = `row ${type}`;
        div.innerHTML = `<div class="content"><div class="avatar" style="background:${type==='user'?'#5436da':'#10a37f'}">${type==='user'?'U':'H'}</div><div class="txt">${txt}</div></div>`;
        win.appendChild(div);
        win.scrollTop = win.scrollHeight;
        return div.querySelector('.txt');
    }

    function type(el, txt) {
        let i = 0;
        let int = setInterval(() => {
            if(i < txt.length) { el.innerHTML += txt.charAt(i); i++; }
            else { clearInterval(int); }
        }, 20);
    }

    function speak(t) {
        const u = new SpeechSynthesisUtterance(t);
        u.lang = 'fa-IR';
        window.speechSynthesis.speak(u);
    }

    function startMic() {
        const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        rec.lang = 'fa-IR';
        rec.onresult = (e) => { document.getElementById('msg-input').value = e.results[0][0].transcript; process(); };
        rec.start();
    }
</script>
</body>
</html>
